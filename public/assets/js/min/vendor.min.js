!function(a){var b=function(){function a(a){this.items=[]}return a.prototype={add:function(a){this.items.push(a)},remove:function(a){var b=this.items.indexOf(a);-1!==b&&this.items.splice(b,1)},getAll:function(){return this.items},find:function(a,b){for(var c,d=this.items,e=d.length,f=[],g=0;e>g;g++)c=a(d[g],g),c&&f.push(d[g]);return b&&b.call(this,f),f}},a}();b.create=function(a){return new b(a)},a.List=b}(window),function(a,b,c){var d=function(){function a(a,d){var e=this;if(this.gMap=new b.maps.Map(a,d),this.markers=c.create(),navigator.geolocation&&d.geolocation)navigator.geolocation.getCurrentPosition(function(a){var c=a.coords.latitude,d=a.coords.longitude,f=new b.maps.LatLng(c,d);e.gMap.setCenter(f)});else{var f=d.center.lat,g=d.center.lng,h=new b.maps.LatLng(f,g);e.gMap.setCenter(h)}if(d.searchbox){var i=document.getElementById("pac-input");this.gMap.controls[b.maps.ControlPosition.TOP_LEFT].push(i);var j=new b.maps.places.SearchBox(i);b.maps.event.addListener(j,"places_changed",function(){var a=j.getPlaces();if(0!=a.length){for(var c,d=[],f=new b.maps.LatLngBounds,g=0;c=a[g];g++){var h={url:c.icon,size:new b.maps.Size(71,71),origin:new b.maps.Point(0,0),anchor:new b.maps.Point(17,34),scaledSize:new b.maps.Size(25,25)},i=new b.maps.Marker({map:this.gMap,icon:h,title:c.name,position:c.geometry.location});d.push(i),f.extend(c.geometry.location)}e.gMap.fitBounds(f)}}),b.maps.event.addListener(this.gMap,"bounds_changed",function(){var a=this.getBounds();j.setBounds(a)})}d.cluster&&(this.markerClusterer=new MarkerClusterer(this.gMap,[],d.cluster.options)),d.geocoder&&(this.geocoder=new b.maps.Geocoder)}return a.prototype={zoom:function(a){return a?void this.gMap.setZoom(a):this.gMap.getZoom()},geocode:function(a){this.geocoder.geocode({address:a.address},function(c,d){d===b.maps.GeocoderStatus.OK?a.success.call(this,c,d):a.error.call(this,d)})},getCurrentPosition:function(a){navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(b){a.call(this,b)})},addMarker:function(a){var c;return a.position={lat:a.lat,lng:a.lng},c=this._createMarker(a),this.markerClusterer&&this.markerClusterer.addMarker(c),this.markers.add(c),a.events&&this.attachEvents(c,a.events),a.content&&this._on({obj:c,event:"click",callback:function(){var d=new b.maps.InfoWindow({content:a.content});d.open(this.gMap,c)}}),c},attachEvents:function(a,b){var c=this;b.forEach(function(b){c._on({obj:a,event:b.name,callback:b.callback})})},_on:function(a){var c=this;b.maps.event.addListener(a.obj,a.event,function(b){a.callback.call(c,b,a.obj)})},findBy:function(a){return this.markers.find(a)},getAllMarkers:function(){return this.markers.getAll()},removeBy:function(a){var b=this;b.markers.find(a,function(a){a.forEach(function(a){b.markerClusterer&&b.markerClusterer.removeMarker(a),a.setMap(null),b.markers.remove(a)})})},_createMarker:function(a){return a.map=this.gMap,new b.maps.Marker(a)},changePosition:function(a){var c=new b.maps.LatLng(a.lat,a.lng);this.gMap.setCenter(c)}},a}();d.create=function(a,b){return new d(a,b)},a.Maperizer=d}(window,google,List),function(a,b){$.widget("map.maperizer",{options:{},_create:function(){var a=this.element[0],c=this.options;this.map=b.create(a,c)},setZoom:function(a){this.map.zoom(a)},getZoom:function(){return this.map.zoom()},setCenter:function(a){var b=this;a.location?b.map.geocode({address:a.location,success:function(a){var c=a[0],d=c.geometry.location.lat(),e=c.geometry.location.lng();b.map.changePosition({lat:d,lng:e})},error:function(a){console.error(a)}}):this.map.changePosition(a)},addMarker:function(a){var b=this;a.location?b.map.geocode({address:a.location,success:function(c){var d=c[0];a.lat=d.geometry.location.lat(),a.lng=d.geometry.location.lng(),b.map.addMarker(a)},error:function(a){console.error(a)}}):this.map.addMarker(a)},attachEventsToMap:function(a){this.map.attachEvents(this.map.gMap,a)},addArray:function(a){var b=this;a.forEach(function(a){b.map.addMarker(a)})},showOnly:function(a){var b=this.map.markers;b.items.forEach(function(a){a.setVisible(!1)});var c=this.map.findBy(a);c.forEach(function(a){a.setVisible(!0)})},addFocusedMarker:function(a){this.map.addMarker(a),this.map.changePosition(a)},findMarkers:function(a){return this.map.findBy(a)},removeMarkers:function(a){this.map.removeBy(a)},removeAllMarkers:function(){this.map.removeBy(function(){return!0})},markers:function(){return this.map.markers.items},getCurrentPosition:function(a){this.map.getCurrentPosition(a)},getPosition:function(){var a=this.map.getAllMarkers()[0],b={lat:a.lat,lng:a.lng};return b}})}(window,Maperizer),function(a,b,c){c.MAP_OPTIONS={geolocation:!0,center:{lat:51.454762,lng:-2.602644},zoom:17,searchbox:!0,cluster:!0,geocoder:!0}}(window,google,window.Maperizer||(window.Maperizer={}));